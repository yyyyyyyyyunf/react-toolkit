# Performance Benchmark

这个目录包含了 `@fly4react/observer` 与 `react-visibility-sensor` 的性能对比测试。

## 功能特性

- **实时性能对比**: 实时显示两个库的可见性检测性能
- **回调响应速度**: 测量每次回调的执行时间
- **触发频率统计**: 统计可见性变化的触发次数
- **可视化界面**: 直观的颜色变化和数值显示

## 运行方法

### 开发模式
```bash
cd benchmark
pnpm dev
```

然后在浏览器中访问 `http://localhost:3001` 查看性能对比。

### 构建生产版本
```bash
pnpm build
pnpm preview
```

## 测试内容

### 1. 实时性能对比
- 两个库同时运行相同的可见性检测任务
- 实时显示回调响应时间和触发频率
- 可视化显示元素可见性状态

### 2. 性能指标
- **回调响应速度**: 每次可见性变化回调的执行时间
- **触发频率**: 可见性变化的触发次数
- **状态同步**: 两个库的状态变化是否同步

## 使用方法

1. 打开 benchmark 页面
2. 滚动页面观察两个组件的表现
3. 查看实时性能数据
4. 对比两个库的响应速度和准确性

## 测试环境

- React 18.3.1
- TypeScript 5.3.3
- Vite 5.0.10
- 现代浏览器 (Chrome, Firefox, Safari, Edge)

## 注意事项

- 测试结果可能因浏览器、设备和系统性能而异
- 建议在相同的浏览器环境下进行对比
- 多次测试取平均值以获得更准确的结果
- 不同设备的性能表现可能有显著差异

## 预期结果

基于我们的测试，`@fly4react/observer` 通常表现出：

- **更快的回调响应速度**: 基于原生 Intersection Observer API
- **更精确的触发**: 更好的阈值控制
- **更低的资源占用**: 零依赖，更小的包体积
- **更好的类型支持**: 完整的 TypeScript 类型定义

## 贡献

如果你发现了性能问题或有改进建议，请：

1. 在 GitHub 上提交 Issue
2. 提供详细的测试环境和步骤
3. 包含具体的性能数据
4. 描述期望的性能表现
